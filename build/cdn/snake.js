!function r(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){function u(){}function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}u.limitUI04=(u.maxFromBits=function(e){return Math.pow(2,e)})(4),u.limitUI06=u.maxFromBits(6),u.limitUI08=u.maxFromBits(8),u.limitUI12=u.maxFromBits(12),u.limitUI14=u.maxFromBits(14),u.limitUI16=u.maxFromBits(16),u.limitUI32=u.maxFromBits(32),u.limitUI40=u.maxFromBits(40),u.limitUI48=u.maxFromBits(48),u.randomUI04=function(){return r(0,u.limitUI04-1)},u.randomUI06=function(){return r(0,u.limitUI06-1)},u.randomUI08=function(){return r(0,u.limitUI08-1)},u.randomUI12=function(){return r(0,u.limitUI12-1)},u.randomUI14=function(){return r(0,u.limitUI14-1)},u.randomUI16=function(){return r(0,u.limitUI16-1)},u.randomUI32=function(){return r(0,u.limitUI32-1)},u.randomUI40=function(){return(0|Math.random()*(1<<30))+(0|1024*Math.random())*(1<<30)},u.randomUI48=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},u.paddedString=function(e,t,n){n=n||"0";for(var r=t-(e=String(e)).length;0<r;r>>>=1,n+=n)1&r&&(e=n+e);return e},u.prototype.fromParts=function(e,t,n,r,o,i){return this.version=n>>12&15,this.hex=u.paddedString(e.toString(16),8)+"-"+u.paddedString(t.toString(16),4)+"-"+u.paddedString(n.toString(16),4)+"-"+u.paddedString(r.toString(16),2)+u.paddedString(o.toString(16),2)+"-"+u.paddedString(i.toString(16),12),this},u.prototype.toString=function(){return this.hex},u.prototype.toURN=function(){return"urn:uuid:"+this.hex},u.prototype.toBytes=function(){for(var e=this.hex.split("-"),t=[],n=0,r=0;r<e.length;r++)for(var o=0;o<e[r].length;o+=2)t[n++]=parseInt(e[r].substr(o,2),16);return t},u.prototype.equals=function(e){return e instanceof UUID&&this.hex===e.hex},u.getTimeFieldValues=function(e){var t=e-Date.UTC(1582,9,15),e=t/4294967296*1e4&268435455;return{low:1e4*(268435455&t)%4294967296,mid:65535&e,hi:e>>>16,timestamp:t}},u._create4=function(){return(new u).fromParts(u.randomUI32(),u.randomUI16(),16384|u.randomUI12(),128|u.randomUI06(),u.randomUI08(),u.randomUI48())},u._create1=function(){var e=(new Date).getTime(),t=u.randomUI14(),n=1099511627776*(1|u.randomUI08())+u.randomUI40(),r=u.randomUI04(),o=0;e!=o?(e<o&&t++,o=e,r=u.randomUI04()):Math.random()<.25&&r<9984?r+=1+u.randomUI04():t++;e=u.getTimeFieldValues(o),o=e.low+r,r=4095&e.hi|4096;return(new u).fromParts(o,e.mid,r,(t&=16383)>>>8|128,255&t,n)},u.create=function(e){return this["_create"+(e=e||4)]()},u.fromTime=function(e,t){t=t||!1;var n=u.getTimeFieldValues(e),r=n.low,e=4095&n.hi|4096;return!1===t?(new u).fromParts(r,n.mid,e,0,0,0):(new u).fromParts(r,n.mid,e,128|u.limitUI06,u.limitUI08-1,u.limitUI48-1)},u.firstFromTime=function(e){return u.fromTime(e,!1)},u.lastFromTime=function(e){return u.fromTime(e,!0)},u.fromURN=function(e){return(e=/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i.exec(e))?(new u).fromParts(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),parseInt(e[4],16),parseInt(e[5],16),parseInt(e[6],16)):null},u.fromBytes=function(e){if(e.length<5)return null;for(var t="",n=0,r=[4,2,2,2,6],o=0;o<r.length;o++){for(var i=0;i<r[o];i++){var a=e[n++].toString(16);t+=a=1==a.length?"0"+a:a}6!==r[o]&&(t+="-")}return u.fromURN(t)},u.fromBinary=function(e){for(var t=[],n=0;n<e.length;n++)if(t[n]=e.charCodeAt(n),255<t[n]||t[n]<0)throw new Error("Unexpected byte in binary data.");return u.fromBytes(t)},u.new=function(){return this.create(4)},u.newTS=function(){return this.create(1)},t.exports=u},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.nip=function(e){return e.slice(0,e.length-1)},n.head=function(e){return e[0]},n.tail=function(e){return e.slice(1)},n.rnd=function(e){return Math.floor(Math.random()*Math.floor(e))}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={north:{x:0,y:-1,name:"north"},south:{x:0,y:1,name:"south"},east:{x:1,y:0,name:"east"},west:{x:-1,y:0,name:"west"}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.constrain=n.rndPoint=n.touch=void 0;var r=e("./algo");n.touch=function(t){return function(e){return t.x==e.x&&t.y==e.y}},n.rndPoint=function(e){return{x:(0,r.rnd)(e.cols),y:(0,r.rnd)(e.rows)}},n.constrain=function(t){return function(e){return(e%t+t)%t}}},{"./algo":2}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hitsSelf=n.eatsApple=void 0;var r=e("../core/point"),o=e("./next_head");n.eatsApple=function(e){return(0,r.touch)((0,o.nextHead)(e))(e.apple)},n.hitsSelf=function(t){return t.snake.find(function(e){return(0,r.touch)((0,o.nextHead)(t))(e)})}},{"../core/point":4,"./next_head":9}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initialState=void 0;var r,o=e("../core/directions");e={cols:40,rows:28,moves:[((r=o)&&r.__esModule?r:{default:r}).default.east],snake:[{x:2,y:2},{x:3,y:2}],apple:{x:16,y:2}};n.initialState=e},{"../core/directions":3}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.next=void 0;var r=e("./next_move"),o=e("./next_snake"),i=e("./next_apple");n.next=function(e){return{rows:e.rows,cols:e.cols,moves:(0,r.nextMoves)(e),snake:(0,o.nextSnake)(e),apple:(0,i.nextApple)(e)}}},{"./next_apple":8,"./next_move":10,"./next_snake":11}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextApple=void 0;var r=e("./collision"),o=e("../core/point");n.nextApple=function(e){return(0,r.eatsApple)(e)?(0,o.rndPoint)(e):e.apple}},{"../core/point":4,"./collision":5}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextHead=void 0;var o=e("../core/algo"),i=e("../core/point");n.nextHead=function(e){if(0==e.snake.length)return(0,i.rndPoint)(e);var t=(0,i.constrain)(e.cols),n=(0,i.constrain)(e.rows),r=(0,o.head)(e.snake),e=(0,o.head)(e.moves);return{x:t(r.x+e.x),y:n(r.y+e.y)}}},{"../core/algo":2,"../core/point":4}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextMoves=void 0;var r=e("../core/algo");n.nextMoves=function(e){return 1<e.moves.length?(0,r.tail)(e.moves):e.moves}},{"../core/algo":2}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.nextSnake=void 0;var r=e("../core/algo"),o=e("../core/point"),i=e("./next_head"),a=e("./collision");n.nextSnake=function(e){return 0==e.snake.length?[(0,o.rndPoint)(e)]:(0,a.hitsSelf)(e)?[]:(0,a.eatsApple)(e)?[(0,i.nextHead)(e)].concat(e.snake):(0,r.nip)([(0,i.nextHead)(e)].concat(e.snake))}},{"../core/algo":2,"../core/point":4,"./collision":5,"./next_head":9}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../render/canvas"),o=e("../input/keyboard"),i=e("../engine/next"),e=e("../engine/init"),a=(setInterval(function(){a=(0,o.keyMoves)(a),a=(0,i.next)(a),(0,r.draw)(a)},100),e.initialState);(0,r.draw)(a),n.default=null},{"../engine/init":6,"../engine/next":7,"../input/keyboard":13,"../render/canvas":14}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.keyMoves=void 0;var r,o=e("../core/directions"),i=(r=o)&&r.__esModule?r:{default:r};function a(e){u.push(e)}var u=[];window.addEventListener("keydown",function(e){switch(e.key){case"w":case"ArrowUp":a(i.default.north);break;case"a":case"ArrowLeft":a(i.default.west);break;case"s":case"ArrowDown":a(i.default.south);break;case"d":case"ArrowRight":a(i.default.east)}}),n.keyMoves=function(e){e={rows:e.rows,cols:e.cols,moves:e.moves.concat(u),snake:e.snake,apple:e.apple};return u=[],e}},{"../core/directions":3}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=document.getElementById("gameboard"),i=o.getContext("2d");n.draw=function(t){function n(e){return Math.round(e*o.width/t.cols)}function r(e){return Math.round(e*o.height/t.rows)}i.fillStyle="#333",i.fillRect(0,0,o.width,o.height),i.fillStyle="#7df",t.snake.map(function(e){return i.fillRect(n(e.x),r(e.y),n(1),r(1))}),i.fillStyle="#f30",i.fillRect(n(t.apple.x),r(t.apple.y),n(1),r(1)),0==t.snake.length&&(i.fillStyle="#f00",i.fillRect(0,0,o.width,o.height))}},{}],15:[function(e,t,n){"use strict";var r=e("./users/host");e("./gameloop/gameloop"),window.cheet("x x x",function(){(0,r.clearHost)(),window.location=window.location.href})},{"./gameloop/gameloop":12,"./users/host":16}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clearHost=n.setName=n.getHost=void 0;var r,o=e("uuid-js");function i(){var e=JSON.parse(window.localStorage.getItem("host"));return e||(window.localStorage.setItem("host",JSON.stringify(a)),a)}var e=((r=o)&&r.__esModule?r:{default:r}).default.create(),a={id:e.toString(),uuid:e,name:"Host"};i();n.getHost=i,n.setName=function(e){var t=i();t.name=e,window.localStorage.setItem("host",JSON.stringify(t))},n.clearHost=function(){return window.localStorage.removeItem("host")}},{"uuid-js":1}]},{},[15]);
//# sourceMappingURL=snake.js.map
